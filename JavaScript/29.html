<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS29</title>

</head>
<body>
    <p>このページから移動しようとすると、確認ダイアログが表示されます。</p>
    <script>
        // ページが非アクティブになる前に確認ダイアログを表示
window.addEventListener('beforeunload', function (e) {
  // カスタムメッセージを表示
  e.returnValue = 'このページを離れようとしています。本当によろしいですか？';
});

// ウィンドウが非アクティブになる前にも確認ダイアログを表示
window.addEventListener('blur', function () {
  const userConfirmation = confirm('このページを離れようとしています。本当によろしいですか？');
  if (!userConfirmation) {
    // ユーザーが「キャンセル」ボタンをクリックした場合、ウィンドウを再度アクティブにする
    window.focus();
  }
});

    </script>
</body>
</html>
